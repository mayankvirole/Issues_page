"use strict";(self["webpackChunkissues_page"]=self["webpackChunkissues_page"]||[]).push([[844],{2844:function(s,t,e){e.r(t),e.d(t,{default:function(){return k}});var a=function(){var s=this,t=s._self._c;return t("div",{staticClass:"display"},[t("display",{attrs:{id:s.issue_id}})],1)},i=[],o=function(){var s=this,t=s._self._c;return t("div",[t("nav",{staticClass:"navbar navbar-expand-lg navbar-dark navi"},[t("div",{staticClass:"container"},[t("router-link",{staticClass:"home",attrs:{to:"/home"}},[s._v("Issues Page")]),t("ul",{staticClass:"navbar-nav"},[t("li",{staticClass:"res-link"},[t("router-link",{attrs:{to:"/resolved-issues"}},[s._v("Resolved Issues")])],1),t("li",{staticClass:"nav-item active"},[t("a",{staticClass:"logout",on:{click:s.logUserOut}},[s._v(" Logout")])])])],1)]),t("div",{staticClass:"inner"},[t("div",{staticClass:"is"},[t("h2",[s._v(s._s(s.issue.title))]),t("p",[s._v(s._s(s.issue.desc))]),t("span",{staticClass:"time-tag"},[s._v("Created by "+s._s(s.issue.author.username)+" at "+s._s(s.issue.createdAt.substring(0,10)))])]),s._l(s.issue.comments,(function(e){return t("div",{key:e._id},[t("div",{staticClass:"comment"},[t("h4",[s._v(s._s(e.text))]),t("p",[s._v("Posted by "+s._s(e.author.username))])])])})),s.allowComment?t("div",{staticClass:"addComment"},[t("label",{attrs:{for:"comm"}}),t("editor",{attrs:{"api-key":"x2wa24yd18evrl913zegfr0p5t0d37jbprlqo1jyt2sk8clw",id:"comm","output-format":"text",init:{selector:"#comm",branding:!1,height:300,placeholder:"Enter your comment here."}},model:{value:s.comment.text,callback:function(t){s.$set(s.comment,"text",t)},expression:"comment.text"}}),t("button",{staticClass:"btn btn-primary btn-block w-25 my-4 com",on:{click:s.postComment}},[s._v("Add Comment")])],1):s._e(),t("div",{staticClass:"btons"},[s.isIssueResolved?s._e():t("button",{staticClass:"btn btn-primary btn-block w-25 my-4 rs",on:{click:s.markResolved}},[s._v("Mark as Resolved")]),s.allowComment||s.issue.resolved?s._e():t("button",{staticClass:"btn btn-primary btn-block w-25 my-4 com",on:{click:s.addComment}},[s._v("New Comment")])])],2)])},n=[],r=(e(7658),e(396)),l=e(6737),u=e.n(l),c=e(6040),m=e.n(c),d={props:["id"],data(){return{user:{},issue:{},allowComment:!1,comment:{text:"",author:{id:"",username:""}},isIssueResolved:!1}},methods:{getUserDetails(){let s=localStorage.getItem("jwt"),t=m().decode(s);this.user=t},async getIssueDetails(){try{let s=await this.$http.get(`/api/issue/Issue?id=${this.id}`);this.issue=s.data.Is,this.isIssueResolved=this.issue.resolved}catch(s){console.log(s.message)}},addComment(){this.allowComment=!this.allowComment},async postComment(){try{this.comment.author=this.issue.author;let s=await this.$http.post("/api/comment/add-comment",this.comment);this.issue.comments.push(s.data.data),this.updateIssue(),this.addComment()}catch(s){console.log(s.message)}},async updateIssue(){try{let s=await this.$http.put("/api/issue/update-issue",this.issue);console.log("response =>",s)}catch(s){console.log(s.message)}},checkIssuesOwnerShip(){return this.user._id===this.issue.author.id},async markResolved(){this.checkIssuesOwnerShip()?(this.issue.resolved=!0,this.updateIssue(),u()("Success","Issue marked resolved","success")):u()("Error","You are not the author of this Issue","error"),this.$router.push("/home")},logUserOut(){localStorage.removeItem("jwt"),this.$router.push("/")}},components:{editor:r.Z},created(){this.getUserDetails(),this.getIssueDetails(),this.checkIssuesOwnerShip()}},h=d,p=e(1001),v=(0,p.Z)(h,o,n,!1,null,null,null),C=v.exports,_={data(){return{issue_id:""}},components:{display:C},created(){this.issue_id=window.location.search.substring(4)}},b=_,g=(0,p.Z)(b,a,i,!1,null,null,null),k=g.exports}}]);
//# sourceMappingURL=844.5149513e.js.map